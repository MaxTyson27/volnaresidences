const forms=[...document.querySelectorAll("form")],body=document.querySelector("body"),inputTel=[...document.querySelectorAll(".input-tel")],files={presentation:"Презентация Volna_Residence.pdf",plan:"План территории Volna Residences.pdf",album:"https://drive.google.com/drive/folders/1ZV0Wn8dpMVpJ_Vi0TvWwTMWS50pgOeCR",docs:"https://drive.google.com/drive/folders/1ZUCapcGLnM3ZCQrU_hiMIGHbpi_Jusz9"};function IsSafari(){var e=navigator.userAgent.toLowerCase();if(-1!=e.indexOf("safari"))return-1<e.indexOf("chrome")?"chrome":"safari"}const locationToFiles=e=>{"safari"!==IsSafari()&&(window.open("","","height=100%,width=100%").location.href=e),location.href="thank.html"},downloadPDF=t=>{const e=new Promise(e=>{let o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",t),o.click(),e(t)});e.then(e=>{"safari"!==IsSafari()&&(window.open("","","height=100%,width=100%").location.href=e),location.href="thank.html"})},animateMainScreen=($.mask.definitions[9]=!1,$.mask.definitions[5]="[0-9]",$.mask.definitions[3]="9",$(".input-tel").mask("+7 (355) 555-5555"),$(".header__content-form").submit(function(e){e.preventDefault();e=$(this).serialize();return $.ajax({type:"POST",url:"submit.php",data:e,success:function(){console.log("send"),downloadPDF(files.presentation),$(".modal__form")[0].reset()},error:function(){console.log("fail")}}),!1}),$(".modal-plan__form").submit(function(e){e.preventDefault();e=$(this).serialize();return $.ajax({type:"POST",url:"submit.php",data:e,success:function(){console.log("send"),downloadPDF(files.plan),$(".modal__form")[0].reset()},error:function(){console.log("fail")}}),!1}),$(".modal-album__form").submit(function(e){e.preventDefault();e=$(this).serialize();return $.ajax({type:"POST",url:"submit.php",data:e,success:function(){console.log("send"),locationToFiles(files.album),$(".modal__form")[0].reset()},error:function(){console.log("fail")}}),!1}),$(".modal-purchase__form").submit(function(e){e.preventDefault();e=$(this).serialize();return $.ajax({type:"POST",url:"submit.php",data:e,success:function(){console.log("send"),location.href="thank.html",$(".modal__form")[0].reset()},error:function(){console.log("fail")}}),!1}),$(".header-modal__form").submit(function(e){e.preventDefault();e=$(this).serialize();return $.ajax({type:"POST",url:"submit.php",data:e,success:function(){console.log("send"),location.href="thank.html",$(".modal__form")[0].reset()},error:function(){console.log("fail")}}),!1}),$(".modal-safety__form").submit(function(e){e.preventDefault();e=$(this).serialize();return $.ajax({type:"POST",url:"submit.php",data:e,success:function(){console.log("send"),$(".modal__form")[0].reset(),locationToFiles(files.docs)},error:function(){console.log("fail")}}),!1}),$(".modal-contacts__form").submit(function(e){e.preventDefault();e=$(this).serialize();return $.ajax({type:"POST",url:"submit.php",data:e,success:function(){console.log("send"),downloadPDF(files.presentation),$(".modal__form")[0].reset()},error:function(){console.log("fail")}}),!1}),()=>{const a=[...document.querySelectorAll(".header__image--scaled")],l=document.querySelector(".header__image--dark"),s=document.querySelector(".header__image--light"),n=document.querySelector(".header__inner");var e=document.documentElement.scrollTop;const t=e=>{e?($(".burger").removeClass("burger--active"),$(".menu--sm").removeClass("menu--active"),$("body").css("overflow","visible")):($(".burger").addClass("burger--active"),$(".menu--sm").addClass("menu--active"),$("body").css("overflow","hidden"),window.removeEventListener("wheel",i))},i=e=>{const t=n.offsetHeight;if(0<e.deltaY){window.removeEventListener("wheel",i),window.addEventListener("scroll",e=>{if(0===document.documentElement.scrollTop){let e=new Promise(function(e,o){body.style.overflow="hidden",s.classList.remove("image-show"),a.forEach(e=>{e.classList.remove("no-transition")}),l.style.opacity=1,n.style.transform="translate(0, 0px)",l.classList.remove("scaled-active"),setTimeout(()=>{e("result")},2e3)});e.then(e=>{window.addEventListener("wheel",i)})}});{let e=new Promise(function(e,o){n.style.transform=`translate(0,-${t}px)`,l.classList.add("scaled-active"),setTimeout(()=>{e("result")},1500)});e.then(e=>{l.style.opacity=0,s.classList.add("image-show"),body.style.overflow="visible",setTimeout(()=>{a.forEach(e=>{e.classList.add("no-transition")})},2300)})}}};$(".header").on("click",e=>{const o=$(e.target);o.hasClass("menu__list-link")?(e.preventDefault(),body.style.overflow="visible",window.removeEventListener("wheel",i),t(!0),e=o,e=$(e).attr("href"),$("html, body").animate({scrollTop:$(e).offset().top},{duration:1e3,easing:"linear"})):o.hasClass("burger")||o.hasClass("burger__span")?$(".menu").hasClass("menu--active")?t(!0):t(!1):o.hasClass("header__top-btn")&&window.removeEventListener("wheel",i)}),0===e&&1440<=document.documentElement.offsetWidth&&(window.addEventListener("wheel",i),body.style.overflow="hidden")}),modalLogic=e=>{const o=$(e.modal),t=$(e.closeIcon),a=$(e.openButton),l=$(".modal-close-bg");var s;const n=(e,o)=>{e?(o.addClass("active"),$("body").css("overflow","hidden"),l.addClass("active")):(o.removeClass("active"),$("body").css("overflow","visible"),l.removeClass("active"))};a.on("click",e=>{e.preventDefault(),n(!0,o)}),t.on("click",e=>{e.preventDefault(),n(!1,o)}),s=o,l.on("click",e=>{s.removeClass("active"),$("body").css("overflow","visible"),l.removeClass("active")})},toggleModals={modalPlan(){modalLogic({modal:".modal-plan",closeIcon:".modal-plan__close",openButton:".download-plan-btn"})},modalAlbum(){modalLogic({modal:".modal-album",closeIcon:".modal-album__close",openButton:".album__button"})},modalPurchase(){modalLogic({modal:".modal-purchase",closeIcon:".modal-purchase__close",openButton:".purchase__btn"})},modalSafety(){modalLogic({modal:".modal-safety",closeIcon:".modal-safety__close",openButton:".safety__btn"})},modalContacts(){modalLogic({modal:".modal-contacts",closeIcon:".modal-contacts__close",openButton:".contacts__btn"})},modalHeader(){modalLogic({modal:".header-modal",closeIcon:".header-modal__close",openButton:".header__top-btn"})}};animateMainScreen(),toggleModals.modalPlan(),toggleModals.modalAlbum(),toggleModals.modalPurchase(),toggleModals.modalSafety(),toggleModals.modalContacts(),toggleModals.modalHeader(),(new WOW).init();